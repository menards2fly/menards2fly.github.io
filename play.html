<!DOCTYPE html>
<html>
    <head>
        <title>GameVerse - Play</title>
        <link rel="icon" type="image/x-icon" href="/uploads/branding/favicon.png">
        <link rel="stylesheet" href="/css/viewers.css">
        <link rel="stylesheet" href="/css/navbar.css">
        <link rel="stylesheet" href="/css/menu.css">
        <script src="/javascript/menu.js"></script>
        <script src="/javascript/scrollbar.js"></script>
        <style>
            /* Animate the body background color */
            body {
                background-color: black;
                animation: fadeInBackground 2s ease-in-out forwards;
                margin-top: 1px;
                overflow: auto;
            }

            .gradient-red {
                background: linear-gradient(to right, #ff7e7e, #ff3d3d);
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
                text-shadow: 0 0 10px rgba(255, 61, 61, 0.8);
                animation: glow 1.5s infinite alternate;
            }

            @keyframes fadeInBackground {
                from {
                    background-color: black;
                }
                to {
                    background-color: black; /* Ensure the final color is black */
                }
            }

            /* Animate the iframe */
            iframe {
                background-color: black;
                opacity: 0;
                animation: fadeInIframe 2s ease-in-out 1s forwards;
            }

            @keyframes fadeInIframe {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            /* Animate the navbar */
            #navbar {
                opacity: 0;
                transform: translateY(-100%);
                animation: slideDownNavbar 1s ease-in-out forwards;
            }

            @keyframes slideDownNavbar {
                from {
                    transform: translateY(-100%);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }

            /* Animate the controls */
            .controls {
                opacity: 0;
                animation: fadeInControls 2s ease-in-out 1.5s forwards;
            }

            @keyframes fadeInControls {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            /* Flexbox for horizontal layout */
            #randomGameContainer {
                display: flex;
                flex-wrap: wrap;
                justify-content: space-around;
            }

            .game {
                flex: 0 1 150px;
                text-align: center;
                color: white;
                margin: 5px;
            }
        </style>
    </head>

    <body>
        <!-- Navbar -->
        <div id="navbar"></div>
        <script src="/javascript/navbar.js"></script>

        <!-- Random Game Container -->
        <div id="randomGameContainer"></div>

        <!-- Main Iframe -->
        <iframe id="myIframe" src="" allowfullscreen></iframe>

        <!-- Controls -->
        <div class="controls">
            <div class="game-info">
                <h2 class="gradient-red"></h2>
            </div>
            <div class="buttons">
                <button id="homeButton"><i class="fa fa-home fa-lg"></i></button>
                <button id="reloadButton"><i class="fa fa-refresh fa-lg"></i></button>
                <button id="fullscreenButton"><i class="fa fa-arrows-alt fa-lg"></i></button>
            </div>
        </div>

        <!-- Script Section -->
        <script>
            // Function to redirect iframe to a sequence of pages
            function redirectIframeSequence() {
                const iframe = document.getElementById('myIframe');
                const originalSrc = iframe.src; // Save the original source of the iframe
                const firstPage = '/storage/loading.html'; // First page URL
                const secondPage = '/storage/another-page'; // Second page URL

                // Step 1: Redirect to the first page
                iframe.src = firstPage;

                // Step 2: After 3 seconds, redirect to the second page
                setTimeout(() => {
                    iframe.src = secondPage;

                    // Step 3: After 5 seconds, redirect back to the original source
                    setTimeout(() => {
                        iframe.src = originalSrc;
                    }, 5000); // 5000 milliseconds = 5 seconds
                }, 3000); // 3000 milliseconds = 3 seconds
            }

            // Event listeners for iframe controls
            document.getElementById('reloadButton').addEventListener('click', () => {
                const iframe = document.getElementById('myIframe');
                iframe.src = iframe.src; // Reload the iframe
            });

            document.getElementById('fullscreenButton').addEventListener('click', () => {
                const iframe = document.getElementById('myIframe');
                if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                } else if (iframe.mozRequestFullScreen) {
                    iframe.mozRequestFullScreen();
                } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                }
            });

            document.getElementById('homeButton').addEventListener('click', () => {
                const currentURL = window.location.href;

                if (currentURL.includes('/storage/tv')) {
                    location.replace('/tv');
                } else if (currentURL.includes('/storage/games')) {
                    location.replace('/games');
                } else if (currentURL.includes('/storage/music')) {
                    location.replace('/music');
                } else {
                    location.replace('/games');
                }
            });

            // Call the redirection sequence on page load
            window.addEventListener('load', () => {
                redirectIframeSequence();
            });
        </script>

        <!-- Particles.JS -->
        <div id="particles-js"></div>
        <script src="/javascript/particles.js"></script>
        <script src="/javascript/particles-config.js"></script>
        <script src="/javascript/panic.js"></script>
        <script src="/javascript/cloaking.js"></script>
        <script src="/javascript/antitabclose.js"></script>
    </body>
</html>