<!DOCTYPE html>
<html>

<head>
  <title>GameVerse - Particle Settings</title>
  <link rel="icon" type="image/x-icon" href="/uploads/branding/favicon.png">
  <link rel="stylesheet" href="/css/navbar.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/menu.css">
</head>

<body>
  <div id="navbar"></div>
  <script src="/javascript/navbar.js"></script>
  <script src="/javascript/footer.js"></script>
  <noscript>
    <meta http-equiv="refresh" content="0; url=/errors/noscript" />
  </noscript>

  <div id="zoom"><br><br><br>
    <center>
      <h1 style="font-size:50px;" class="gradient-red">Particle Settings</h1>
      <p>Customize the background particles for your GameVerse experience. âœ¨</p>
      <hr style="border:3px solid white">

      <div class="profile-container"
        style="text-align:center;padding:20px;background:black;box-shadow:0 4px 8px rgba(0,0,0,0.1);border-radius:10px;width:350px;margin:auto;">
        
        <label>Number of Particles:</label>
        <input type="number" id="numParticles" value="80" min="10" max="500"><br><br>

        <label>Particle Color:</label>
        <input type="color" id="particleColor" value="#db0007"><br><br>

        <label>Size:</label>
        <input type="number" id="particleSize" value="3" min="1" max="10"><br><br>

        <label>Speed:</label>
        <input type="number" id="particleSpeed" value="1.5" step="0.1"><br><br>

        <button onclick="applySettings()" style="padding:10px 20px;font-size:16px;background:#007bff;color:white;border:none;border-radius:5px;cursor:pointer;">
          Apply & Save
        </button>
      </div>
    </center>
  </div>

  <div id="particles-js"></div>

  <script src="/javascript/particles.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
        let particleSettings = JSON.parse(localStorage.getItem("particleSettings")) || {
            particles: {
                number: { value: 80 },
                color: { value: "#db0007" },
                size: { value: 3 },
                speed: { value: 1.5 }
            }
        };

        function loadParticles() {
            if (document.getElementById("particles-js")) {
                particlesJS('particles-js', {
                    "particles": {
                        "number": { "value": particleSettings.particles.number.value },
                        "color": { "value": particleSettings.particles.color.value },
                        "shape": { "type": "circle" },
                        "size": { "value": particleSettings.particles.size.value },
                        "move": { "speed": particleSettings.particles.speed.value }
                    },
                    "interactivity": {
                        "detect_on": "canvas",
                        "events": {
                            "onclick": { "enable": true, "mode": "push" }
                        }
                    },
                    "retina_detect": true
                });
            }
        }

        loadParticles(); // Initialize particles on page load

        // Populate form fields with saved values
        document.getElementById("numParticles").value = particleSettings.particles.number.value;
        document.getElementById("particleColor").value = particleSettings.particles.color.value;
        document.getElementById("particleSize").value = particleSettings.particles.size.value;
        document.getElementById("particleSpeed").value = particleSettings.particles.speed.value;

        // Function to apply and save settings
        window.applySettings = function() {
            particleSettings.particles.number.value = parseInt(document.getElementById("numParticles").value);
            particleSettings.particles.color.value = document.getElementById("particleColor").value;
            particleSettings.particles.size.value = parseInt(document.getElementById("particleSize").value);
            particleSettings.particles.speed.value = parseFloat(document.getElementById("particleSpeed").value);

            // Save settings to localStorage
            localStorage.setItem("particleSettings", JSON.stringify(particleSettings));

            // Reset and reload particles with new settings
            document.getElementById("particles-js").innerHTML = "";
            loadParticles();

            alert("Settings saved! Your changes will now apply across the entire site.");
        };
    });
  </script>

</body>

</html>
