<!doctype html>
<html>
  <head>
    <!-- Page Title and Favicon -->
    <title>starship - contact us</title>
    <link rel="icon" type="image/x-icon" href="/uploads/branding/favicon.png" />
    <meta
      name="description"
      content="Play games, level up, and explore Starship - your new favorite gaming site."
    />
    <link rel="canonical" href="https://starship-app.com/contact" />
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/navbar.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <!-- Google AdSense and Google Analytics -->

    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4851718454212779"
      crossorigin="anonymous"
    ></script>
    <!-- Google tag (gtag.js) -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-ZZH4JE7RJF"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-ZZH4JE7RJF');
    </script>
 
  </head>
  <body>
    <!-- Navigation Bar -->
    <div id="navbar"></div>
    <script type="module" src="/javascript/navbar.js"></script>
<div class="form-container">
  <h1>Contact Starship</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="request_game">Request Game</button>
    <button class="tab-btn" data-tab="contact">Contact</button>
    <button class="tab-btn" data-tab="bug_report">Bug Report</button>
  </div>

  <!-- Form -->
  <form id="submission-form">
    <input type="hidden" id="submission-type" name="type" value="request_game">

    <!-- Dynamic Inputs -->
    <div class="form-fields" id="form-fields">
      <!-- Fields will be injected here based on type -->
    </div>

    <button type="submit" class="submit-btn">Submit</button>
    <div id="form-status"></div>
  </form>
</div>

<style>
  body {
    font-family: Inter, sans-serif !important;
  }
/* Container & Blur */
.form-container {
  max-width: 600px;
  margin: 50px auto;
  padding: 40px;
  border-radius: 20px;
  background: rgba(0,0,0,0.5);
  color: #fff;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 0 40px rgba(0,0,0,0.5);
  font-family: 'Arial', sans-serif;
  border: 2px solid #8a2be2;
}

/* Title */
.form-container h1 {
  text-align: center;
  margin-bottom: 30px;
  font-size: 2.5rem;
  text-shadow: 0 0 8px #8a2be2;
}

/* Tabs */
.tabs {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 25px;
}

.tab-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  background: rgba(255,255,255,0.1);
  color: #fff;
  font-weight: bold;
  transition: all 0.3s ease;
}

.tab-btn.active, .tab-btn:hover {
  background: #8a2be2;
  box-shadow: 0 0 12px #8a2be2, 0 0 24px rgba(138,43,226,0.3);
}

/* Form Fields */
.form-fields .field-group {
  margin-bottom: 18px;
}

.form-fields label {
  font-weight: bold;
  display: block;
  margin-bottom: 4px;
}

.form-fields input, 
.form-fields textarea {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: none;
  background: rgba(255,255,255,0.1);
  color: #fff;
  font-size: 1rem;
  outline: none;
  transition: all 0.3s ease;
}

.form-fields input:focus, 
.form-fields textarea:focus {
  border: 2px solid #8a2be2;
  box-shadow: 0 0 8px #8a2be2;
}

.form-fields small {
  display: block;
  font-size: 0.8rem;
  opacity: 0.8;
  margin-top: 2px;
}

/* Submit Button */
.submit-btn {
  display: block;
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: #8a2be2;
  font-weight: bold;
  cursor: pointer;
  font-size: 1.1rem;
  transition: all 0.3s ease;
}

.submit-btn:hover {
  box-shadow: 0 0 12px #8a2be2, 0 0 24px rgba(138,43,226,0.3);
}

/* Status */
#form-status {
  margin-top: 16px;
  font-size: 1rem;
  opacity: 0.9;
  text-align: center;
}
</style>

<script type="module">


// Tabs
const tabButtons = document.querySelectorAll('.tab-btn');
const submissionTypeInput = document.getElementById('submission-type');
const formFields = document.getElementById('form-fields');

const formsConfig = {
  request_game: [
    { label: 'Game Name', type: 'text', name: 'title', description: 'The name of the game you want to request.', required: true },
    { label: 'Game URL', type: 'url', name: 'game_url', description: 'Optional link to the game.', required: false },
    { label: 'Message', type: 'textarea', name: 'message', description: 'Any additional details about the request.', required: true }
  ],
  contact: [
    { label: 'Name', type: 'text', name: 'title', description: 'Your full name.', required: true },
    { label: 'Email', type: 'email', name: 'message', description: 'Your email address so we can reply.', required: true },
    { label: 'Message', type: 'textarea', name: 'message2', description: 'Your message.', required: true }
  ],
  bug_report: [
    { label: 'Bug Title', type: 'text', name: 'title', description: 'Short description of the bug.', required: true },
    { label: 'Location', type: 'text', name: 'location', description: 'Where in the game/site the bug occurs.', required: true },
    { label: 'Steps to Reproduce', type: 'textarea', name: 'steps', description: 'Exact steps to reproduce the bug.', required: true },
    { label: 'Additional Info', type: 'textarea', name: 'message', description: 'Any extra information about the bug.', required: false }
  ]
};

function renderFormFields(type) {
  formFields.innerHTML = '';
  formsConfig[type].forEach(field => {
    const div = document.createElement('div');
    div.className = 'field-group';
    let inputHTML;
    if(field.type === 'textarea') {
      inputHTML = `<textarea name="${field.name}" ${field.required ? 'required' : ''}></textarea>`;
    } else {
      inputHTML = `<input type="${field.type}" name="${field.name}" ${field.required ? 'required' : ''}>`;
    }
    div.innerHTML = `<label>${field.label}</label>${inputHTML}<small>${field.description}</small>`;
    formFields.appendChild(div);
  });
}

// Initialize
renderFormFields('request_game');

tabButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    tabButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const type = btn.dataset.tab;
    submissionTypeInput.value = type;
    renderFormFields(type);
  });
});

// Form submission
const form = document.getElementById('submission-form');
const status = document.getElementById('form-status');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  status.textContent = 'Submitting...';

  const { data: { user } } = await supabase.auth.getUser();
  if (!user) {
    status.textContent = 'You must be logged in to submit a form.';
    return;
  }

  const formData = new FormData(form);
  const type = formData.get('type');
  const payload = { user_id: user.id, type };

  formData.forEach((value, key) => {
    if(key !== 'type') payload[key] = value;
  });

  const { error } = await supabase.from('form_submissions').insert([payload]);

  if (error) {
    status.textContent = 'Error: ' + error.message;
  } else {
    status.textContent = 'Submission sent! Thanks!';
    form.reset();
    // Placeholder for custom success function
    handleFormSuccess();
  }
});

// Success placeholder
function handleFormSuccess() {
  // You can replace this with your own success behavior
  console.log('Form successfully submitted!');
}
</script>



    <!-- Particles.JS Background -->
    <div id="particles-js"></div>
    <script src="/javascript/particles.js"></script>
    <script src="/javascript/panic.js" type="module"></script>
    <script src="/javascript/antitabclose.js"></script>
    <script src="/javascript/cloaking.js" type="module"></script>
    <script src="/javascript/particles-config.js"></script>
    <script type="module" src="/javascript/notifications.js"></script>
    <script src="/javascript/screentimetracking.js" type="module"></script>
    <!-- Scrollbar Customization -->


    <!-- Scheduler -->

    <script src="/javascript/schedule.js"></script>
  </body>
</html>
